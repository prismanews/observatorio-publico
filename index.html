<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Observatorio Público · Gasto Municipal</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="estilo.css">

</head>
<body>

<div class="background"></div>

<div class="container">

    <div class="header">
        <h1>Observatorio Público</h1>
        <p class="tagline">Transparencia y análisis del gasto municipal en España</p>
    </div>

    <div class="search-box">
        <input type="text" id="busqueda" placeholder="Introduce código postal o municipio..." autocomplete="off">
        <div id="sugerencias" class="sugerencias"></div>
    </div>

    <div class="resultado" id="resultado"></div>

    <div class="footer">
        Datos simulados con fines ilustrativos · Proyecto Prisma News
    </div>

</div>

<script>

// Simulación inicial (luego lo conectamos a JSON real)
let codigos = [
    { cp: "28001", municipio: "Madrid", provincia: "Madrid" },
    { cp: "08001", municipio: "Barcelona", provincia: "Barcelona" },
    { cp: "41001", municipio: "Sevilla", provincia: "Sevilla" },
    { cp: "46001", municipio: "Valencia", provincia: "Valencia" },
    { cp: "29001", municipio: "Málaga", provincia: "Málaga" },
    { cp: "15001", municipio: "A Coruña", provincia: "A Coruña" },
    { cp: "28942", municipio: "Fuenlabrada", provincia: "Madrid" }
];

const input = document.getElementById("busqueda");
const sugerencias = document.getElementById("sugerencias");

input.addEventListener("input", function() {
    const valor = this.value.toLowerCase();
    sugerencias.innerHTML = "";

    if (valor.length < 2) return;

    const filtrados = codigos.filter(item =>
        item.cp.includes(valor) ||
        item.municipio.toLowerCase().includes(valor)
    );

    filtrados.slice(0, 8).forEach(item => {
        const div = document.createElement("div");
        div.classList.add("item-sugerencia");
        div.textContent = `${item.cp} · ${item.municipio} (${item.provincia})`;
        div.onclick = () => mostrarResultado(item);
        sugerencias.appendChild(div);
    });
});

function mostrarResultado(item) {
    sugerencias.innerHTML = "";
    input.value = `${item.cp} - ${item.municipio}`;

    document.getElementById("resultado").innerHTML = `
        <div class="card">
            <h2>${item.municipio}</h2>
            <span>${item.provincia}</span>
            <div class="badge">Análisis generado</div>
        </div>
    `;
}

</script>

</body>
</html>
